{"version":3,"file":"components-ai-chat-content-chat-assistant-error-chat-assistant-error-stories.48391b56.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA","sources":["webpack:///../aiwindow/ui/components/ai-chat-content/chat-assistant-error/chat-assistant-error.stories.mjs","webpack:///../aiwindow/ui/components/ai-chat-content/chat-assistant-error/chat-assistant-error.mjs"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { html } from \"chrome://global/content/vendor/lit.all.mjs\";\nimport \"chrome://browser/content/aiwindow/components/chat-assistant-error.mjs\";\n\nexport default {\n  title: \"Domain-specific UI Widgets/AI Window/Chat Assistant Error\",\n  component: \"chat-assistant-error\",\n  argTypes: {\n    errorStatus: {\n      control: \"select\",\n      options: [400, 413, 429, 500],\n    },\n    actionButton: {\n      control: \"object\",\n    },\n    errorText: {\n      control: \"object\",\n    },\n  },\n  parameters: {\n    fluent: `\nsmartwindow-assistant-error-generic-header = We could not proceed with your request, please try again.\nsmartwindow-assistant-error-budget-header = Youâ€™ve hit the maximum number of interactions allowed in a single day. Your access will reset at midnight ET.\nsmartwindow-assistant-error-budget-body = You can still search and navigate in Smart Window but chat functionality will be limited.\nsmartwindow-assistant-error-long-message-header = This chat has reached the maximum length. Clear the chat or start a new conversation to continue.\nsmartwindow-assistant-error-connection-header = Connection was lost or unsuccessful. Check your connection and try again.\nsmartwindow-retry-btn = Retry\nsmartwindow-switch-btn = Switch to Classic Window\nsmartwindow-clear-btn = Clear chat\n    `,\n  },\n};\n\nconst Template = ({ errorStatus, errorText, actionButton }) => html`\n  <chat-assistant-error\n    .errorStatus=${errorStatus}\n    .errorText=${errorText}\n    .actionButton=${actionButton}\n  ></chat-assistant-error>\n`;\n\nexport const Default = Template.bind({});\nDefault.args = {\n  errorStatus: 400,\n  errorText: {\n    header: \"smartwindow-assistant-error-generic-header\",\n  },\n  actionButton: null,\n};\n\nexport const Budget = Template.bind({});\nBudget.args = {\n  errorStatus: 429,\n  errorText: {\n    header: \"smartwindow-assistant-error-budget-header\",\n    body: \"smartwindow-assistant-error-budget-body\",\n  },\n  actionButton: {\n    label: \"smartwindow-switch-btn\",\n  },\n};\n\nexport const Long = Template.bind({});\nLong.args = {\n  errorStatus: 413,\n  errorText: {\n    header: \"smartwindow-assistant-error-long-message-header\",\n  },\n  actionButton: null,\n};\n\nexport const Connection = Template.bind({});\nConnection.args = {\n  errorStatus: 500,\n  errorText: {\n    header: \"smartwindow-assistant-error-connection-header\",\n  },\n  actionButton: {\n    label: \"smartwindow-retry-btn\",\n  },\n};\n","import __chrome_styles_loader__chatassistanterrorStyles from \"browser/components/aiwindow/ui/components/ai-chat-content/chat-assistant-error/chat-assistant-error.css\";\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport { MozLitElement } from \"chrome://global/content/lit-utils.mjs\";\nimport { html, nothing } from \"chrome://global/content/vendor/lit.all.mjs\";\n\nconst ERROR_TYPES = {\n  PAYLOAD_TOO_LARGE: 413,\n  RATE_LIMIT: 429,\n  SERVER_ERROR_MIN: 500,\n  SERVER_ERROR_MAX: 599,\n};\n\n/**\n * Shows an error message based on an error status\n */\nexport class ChatAssistantError extends MozLitElement {\n  static properties = {\n    errorStatus: { type: Number },\n    actionButton: { type: Object },\n    errorText: { type: Object },\n  };\n\n  constructor() {\n    super();\n    this.actionButton = null;\n    this.errorText = {\n      header: \"smartwindow-assistant-error-generic-header\",\n    };\n  }\n\n  willUpdate(changed) {\n    if (changed.has(\"errorStatus\")) {\n      this.getErrorInformation();\n    }\n  }\n\n  // TO DO: implement action buttons functionality\n\n  /* https://mozilla-hub.atlassian.net/browse/GENAI-2863\n  also needs its own error message/functionality */\n\n  retryAssistantMessage() {\n    const event = new CustomEvent(\"aiChatError:retry-message\", {\n      bubbles: true,\n      composed: true,\n    });\n    this.dispatchEvent(event);\n  }\n\n  /* https://mozilla-hub.atlassian.net/browse/GENAI-3170\n  switchToClassic() {\n    console.log(\"switch to classic..\");\n  }\n  */\n\n  /* https://mozilla-hub.atlassian.net/browse/GENAI-3171\n  clearChat() {\n    console.log(\"open a new chat..\");\n  }\n  */\n\n  getErrorInformation() {\n    if (this.errorStatus === ERROR_TYPES.PAYLOAD_TOO_LARGE) {\n      this.errorText = {\n        header: \"smartwindow-assistant-error-long-message-header\",\n      };\n      // this.actionButton = {\n      //   label: \"smartwindow-clear-btn\",\n      //   action: this.clearChat,\n      // };\n      return;\n    }\n    if (this.errorStatus === ERROR_TYPES.RATE_LIMIT) {\n      this.errorText = {\n        header: \"smartwindow-assistant-error-budget-header\",\n        body: \"smartwindow-assistant-error-budget-body\",\n      };\n      // this.actionButton = {\n      //   label: \"smartwindow-switch-btn\",\n      //   action: this.switchToClassic,\n      // };\n      return;\n    }\n    if (\n      this.errorStatus >= ERROR_TYPES.SERVER_ERROR_MIN &&\n      this.errorStatus <= ERROR_TYPES.SERVER_ERROR_MAX\n    ) {\n      this.actionButton = {\n        label: \"smartwindow-retry-btn\",\n        action: this.retryAssistantMessage.bind(this),\n      };\n    }\n  }\n\n  render() {\n    return html`\n      <link\n        rel=\"stylesheet\"\n        href=\"${__chrome_styles_loader__chatassistanterrorStyles}\"\n      />\n      <div class=\"chat-assistant-error\">\n        <h3\n          class=\"chat-assistant-error__header\"\n          data-l10n-id=${this.errorText?.header}\n        ></h3>\n        ${this.errorText?.body\n          ? html`<p\n              class=\"chat-assistant-error__body\"\n              data-l10n-id=${this.errorText?.body}\n            ></p>`\n          : nothing}\n        ${this.actionButton\n          ? html`<moz-button\n              class=\"chat-assistant-error__button\"\n              data-l10n-id=${this.actionButton?.label}\n              size=\"small\"\n              @click=${this.actionButton?.action}\n            ></moz-button>`\n          : nothing}\n      </div>\n    `;\n  }\n}\n\ncustomElements.define(\"chat-assistant-error\", ChatAssistantError);\n"],"names":[],"sourceRoot":""}