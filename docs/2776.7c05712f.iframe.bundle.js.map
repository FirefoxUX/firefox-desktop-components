{"version":3,"file":"2776.7c05712f.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAEA;AAOA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///../../../toolkit/content/widgets/moz-select/moz-select.mjs"],"sourcesContent":["import __chrome_styles_loader__mozselectStyles from \"toolkit/content/widgets/moz-select/moz-select.css\";\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport {\n  createRef,\n  html,\n  ref,\n  classMap,\n  ifDefined,\n} from \"../vendor/lit.all.mjs\";\nimport { MozBaseInputElement, MozLitElement } from \"../lit-utils.mjs\";\n\n/** @import { TemplateResult } from \"chrome://global/content/vendor/lit.all.mjs\" */\n\n/**\n * @typedef {object} SelectOption\n * @property {string} value - The value of the option.\n * @property {string} label - The display label of the option.\n * @property {string} [iconSrc] - The icon source URL for the option.\n * @property {boolean} [disabled] - Whether the option is disabled.\n * @property {boolean} [hidden] - Whether the option is hidden.\n */\n\n/**\n * A select dropdown with options provided via custom `moz-option` elements.\n *\n * @tagname moz-select\n * @property {string} label - The text of the label element\n * @property {string} name - The name of the input control\n * @property {string} value - The value of the selected option\n * @property {boolean} disabled - The disabled state of the input control\n * @property {string} iconSrc - The src for an optional icon\n * @property {string} description - The text for the description element that helps describe the input control\n * @property {string} supportPage - Name of the SUMO support page to link to.\n * @property {string} ariaLabel - The aria-label text when there is no visible label.\n * @property {string} ariaDescription - The aria-description text when there is no visible description.\n * @property {SelectOption[]} options - The array of options, populated by <moz-option> children in the\n *     default slot. Do not set directly, these will be overridden by <moz-option> children.\n * @property {SelectOption} selectedOption - The currently selected option object.\n * @property {number} selectedIndex - The index of the currently selected option.\n * @property {boolean} usePanelList - Whether or not to render a panel. Depends on options using icons.\n */\nexport default class MozSelect extends MozBaseInputElement {\n  static properties = {\n    options: { type: Array, state: true },\n    selectedOption: { type: Object, state: true },\n    selectedIndex: { type: Number, state: true },\n    usePanelList: { type: Boolean, state: true },\n  };\n  static inputLayout = \"block\";\n\n  static queries = {\n    panelList: \"panel-list\",\n    panelTrigger: \".panel-trigger\",\n  };\n\n  constructor() {\n    super();\n    this.value = \"\";\n    this.options = [];\n    this.usePanelList = false;\n    this.selectedOption = null;\n    this.selectedIndex = 0;\n    this.slotRef = createRef();\n    this.optionsMutationObserver = new MutationObserver(\n      this.populateOptions.bind(this)\n    );\n  }\n\n  firstUpdated(changedProperties) {\n    super.firstUpdated(changedProperties);\n    this.optionsMutationObserver.observe(this, {\n      attributeFilter: [\"label\", \"value\", \"iconsrc\", \"disabled\", \"hidden\"],\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  update(changedProperties) {\n    super.update(changedProperties);\n    if (this.hasUpdated && changedProperties.has(\"options\")) {\n      // Match the select's value on initial render or options change.\n      this.value = this.inputEl.value;\n    }\n  }\n\n  willUpdate(changedProperties) {\n    super.willUpdate(changedProperties);\n    if (changedProperties.has(\"value\") || changedProperties.has(\"options\")) {\n      this.selectedIndex = this.options.findIndex(\n        opt => opt.value === this.value\n      );\n      this.selectedOption = this.options[this.selectedIndex] ?? this.options[0];\n    }\n  }\n\n  /**\n   * Gets the icon source for the currently selected option.\n   *\n   * @returns {string} The icon source URL or empty string.\n   */\n  get _selectedOptionIconSrc() {\n    return this.selectedOption?.iconSrc ?? \"\";\n  }\n\n  /**\n   * Internal - populates the select element with options from the light DOM slot.\n   */\n  populateOptions() {\n    if (!this.slotRef.value) {\n      this.options = [];\n      this.usePanelList = false;\n      return;\n    }\n\n    let options = [];\n\n    for (const node of this.slotRef.value.assignedNodes()) {\n      if (node.localName === \"moz-option\") {\n        options.push({\n          value: node.getAttribute(\"value\"),\n          label: node.getAttribute(\"label\"),\n          iconSrc: node.getAttribute(\"iconsrc\"),\n          disabled: node.getAttribute(\"disabled\") !== null,\n          hidden: node.getAttribute(\"hidden\") !== null,\n        });\n      } else if (node.localName === \"hr\") {\n        options.push({\n          separator: true,\n        });\n      }\n    }\n\n    this.options = options;\n    this.usePanelList = options.some(opt => opt.iconSrc);\n\n    // Default to first option if no value set to match native select behavior.\n    if (this.usePanelList && !this.value && this.options.length) {\n      this.value = this.options[0].value;\n    }\n  }\n\n  /**\n   * Handles change events and updates the selected value.\n   *\n   * @param {Event} event\n   * @memberof MozSelect\n   */\n  handleStateChange(event) {\n    this.value = event.target.value;\n  }\n\n  /**\n   * Handles change events from the panel-list and dispatches a change event.\n   *\n   * @param {Event} event - The click event from panel-item selection.\n   */\n  handlePanelChange(event) {\n    this.handleStateChange(event);\n    this.redispatchEvent(new Event(\"change\", { bubbles: true }));\n  }\n\n  /**\n   * Handles the panel being hidden and returns focus to the trigger button.\n   */\n  handlePanelHidden() {\n    this.panelTrigger?.focus();\n  }\n\n  /**\n   * Toggles the panel-list open/closed state.\n   *\n   * @param {Event} event - The triggering event.\n   */\n  togglePanel(event) {\n    this.panelList?.toggle(event);\n  }\n\n  /**\n   * Prevents mousedown on the trigger from propagating to panel-list's document\n   * listener, which would close the panel before the click handler can toggle\n   * it.\n   *\n   * @param {MouseEvent} event - The mousedown event.\n   */\n  handlePanelMousedown(event) {\n    event.stopPropagation();\n  }\n\n  /**\n   * Handles keyboard events on the panel trigger button.\n   * Arrow keys change selection (Windows/Linux) or open the panel (Mac).\n   * Space opens the panel. Enter is prevented to match native select behavior.\n   *\n   * @param {KeyboardEvent} event - The keyboard event.\n   */\n  handlePanelKeydown(event) {\n    if (this.panelList?.open) {\n      return;\n    }\n\n    switch (event.key) {\n      case \"ArrowDown\":\n      case \"ArrowUp\":\n        event.preventDefault();\n        if (navigator.platform.includes(\"Mac\")) {\n          // Mac - open the menu\n          this.togglePanel(event);\n        } else {\n          // Windows/Linux - select the next option\n          this.selectNextOption(event.key === \"ArrowDown\" ? 1 : -1);\n        }\n        break;\n      case \"Enter\":\n        event.preventDefault();\n        break;\n      case \" \":\n        event.preventDefault();\n        this.togglePanel(event);\n        break;\n    }\n  }\n\n  /**\n   * Selects the next enabled option in the given direction. Skips disabled and\n   * hidden options.\n   *\n   * @param {number} direction - The direction to move (1 for next, -1 for\n   * previous).\n   */\n  selectNextOption(direction) {\n    let currentIndex = this.selectedIndex;\n    let options = this.options;\n\n    for (let i = 1; i < options.length; i++) {\n      let nextIndex = currentIndex + direction * i;\n      let nextOption = options[nextIndex];\n      if (nextOption && !nextOption.disabled && !nextOption.hidden) {\n        this.value = nextOption.value;\n        this.redispatchEvent(new Event(\"change\", { bubbles: true }));\n        return;\n      }\n    }\n  }\n\n  /**\n   * @type {MozBaseInputElement['inputStylesTemplate']}\n   */\n  inputStylesTemplate() {\n    return html` <link\n      rel=\"stylesheet\"\n      href=\"${__chrome_styles_loader__mozselectStyles}\"\n    />`;\n  }\n\n  /**\n   * Renders the icon for the currently selected option.\n   *\n   * @returns {TemplateResult | null}\n   */\n  selectedOptionIconTemplate() {\n    if (this._selectedOptionIconSrc) {\n      return html`<img\n        src=${this._selectedOptionIconSrc}\n        role=\"presentation\"\n        class=\"select-option-icon\"\n      />`;\n    }\n    return null;\n  }\n\n  /**\n   * Renders the native select element (used when options don't have icons).\n   *\n   * @returns {TemplateResult}\n   */\n  selectTemplate() {\n    return html`<select\n      id=\"input\"\n      name=${this.name}\n      .value=${this.value}\n      accesskey=${this.accessKey}\n      @input=${this.handleStateChange}\n      @change=${this.redispatchEvent}\n      ?disabled=${this.disabled || this.parentDisabled}\n      aria-label=${ifDefined(this.ariaLabel ?? undefined)}\n      aria-describedby=\"description\"\n      aria-description=${ifDefined(\n        this.hasDescription ? undefined : this.ariaDescription\n      )}\n    >\n      ${this.options.map(option =>\n        option.separator\n          ? html`<hr />`\n          : html`\n              <option\n                value=${option.value}\n                .selected=${option.value == this.value}\n                ?disabled=${option.disabled}\n                ?hidden=${option.hidden}\n              >\n                ${option.label}\n              </option>\n            `\n      )}\n    </select>`;\n  }\n\n  /**\n   * Renders the button trigger for the panel-list (used when options have\n   * icons).\n   *\n   * @returns {TemplateResult}\n   */\n  panelTargetTemplate() {\n    return html`<button\n      class=\"panel-trigger\"\n      aria-haspopup=\"menu\"\n      aria-expanded=${this.panelList?.open ? \"true\" : \"false\"}\n      @click=${this.togglePanel}\n      @keydown=${this.handlePanelKeydown}\n      @mousedown=${this.handlePanelMousedown}\n      ?disabled=${this.disabled || this.parentDisabled}\n    >\n      ${this.selectedOption?.label}\n    </button>`;\n  }\n\n  /**\n   * Renders the panel-list dropdown menu (used when options have icons).\n   *\n   * @returns {TemplateResult}\n   */\n  panelListTemplate() {\n    return html`<panel-list\n      .value=${this.value}\n      min-width-from-anchor\n      id=\"input\"\n      @click=${this.handlePanelChange}\n      @hidden=${this.handlePanelHidden}\n    >\n      ${this.options.map(option =>\n        option.separator\n          ? html`<hr />`\n          : html`<panel-item\n              .value=${option.value}\n              ?selected=${option.value == this.value}\n              ?disabled=${option.disabled}\n              ?hidden=${option.hidden}\n              icon=${ifDefined(option.iconSrc)}\n              style=${option.iconSrc\n                ? `--select-item-icon-url: url(${option.iconSrc})`\n                : \"\"}\n            >\n              ${option.label}\n            </panel-item>`\n      )}\n    </panel-list>`;\n  }\n\n  /**\n   * Renders the main input template with either a native select or panel-list.\n   *\n   * @returns {TemplateResult}\n   */\n  inputTemplate() {\n    return html`\n      <div\n        class=${classMap({\n          \"select-wrapper\": true,\n          \"with-icon\": !!this._selectedOptionIconSrc,\n        })}\n      >\n        ${this.selectedOptionIconTemplate()}\n        ${!this.usePanelList\n          ? this.selectTemplate()\n          : this.panelTargetTemplate()}\n        <img\n          src=\"chrome://global/skin/icons/arrow-down.svg\"\n          role=\"presentation\"\n          class=\"select-chevron-icon\"\n        />\n      </div>\n      ${this.usePanelList ? this.panelListTemplate() : \"\"}\n      <slot\n        @slotchange=${this.populateOptions}\n        hidden\n        ${ref(this.slotRef)}\n      ></slot>\n    `;\n  }\n}\ncustomElements.define(\"moz-select\", MozSelect);\n\n/**\n * A custom option element for use in moz-select.\n *\n * @tagname moz-option\n * @property {string} value - The value of the option\n * @property {string} label - The label of the option\n * @property {string} iconSrc - The path to the icon of the the option\n * @property {boolean} disabled - Whether the option is disabled\n * @property {boolean} hidden - Whether the option is hidden\n */\nexport class MozOption extends MozLitElement {\n  static properties = {\n    // Reflect the attribute so that moz-select can detect changes with a MutationObserver\n    value: { type: String, reflect: true },\n    // Reflect the attribute so that moz-select can detect changes with a MutationObserver\n    label: { type: String, reflect: true, fluent: true },\n    iconSrc: { type: String, reflect: true },\n    disabled: { type: Boolean, reflect: true },\n    hidden: { type: Boolean, reflect: true },\n  };\n\n  constructor() {\n    super();\n    this.value = \"\";\n    this.label = \"\";\n    this.iconSrc = \"\";\n    this.disabled = false;\n    this.hidden = false;\n  }\n\n  render() {\n    // This is just a placeholder to pass values into moz-select.\n    return \"\";\n  }\n}\ncustomElements.define(\"moz-option\", MozOption);\n"],"names":[],"sourceRoot":""}