{"version":3,"file":"moz-five-star-moz-five-star-stories.f5454eec.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;;AAEA;AACA;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///../../../toolkit/content/widgets/moz-five-star/moz-five-star.stories.mjs","webpack:///../../../toolkit/content/widgets/moz-five-star/moz-five-star.mjs"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { html, ifDefined } from \"../vendor/lit.all.mjs\";\nimport \"./moz-five-star.mjs\";\n\nexport default {\n  title: \"UI Widgets/Five Star\",\n  component: \"moz-five-star\",\n  parameters: {\n    status: \"in-development\",\n    fluent: `\nmoz-five-star-title =\n  .title = This is the title\nmoz-five-star-aria-label =\n  .aria-label = This is the aria-label\n    `,\n    actions: {\n      handles: [\"select\"],\n    },\n  },\n};\n\nconst Template = ({\n  rating,\n  ariaLabel,\n  l10nId,\n  selectable,\n  selectedHandler,\n}) => html`\n  <div style=\"max-width: 400px\">\n    <moz-five-star\n      rating=${rating}\n      aria-label=${ifDefined(ariaLabel)}\n      data-l10n-id=${ifDefined(l10nId)}\n      data-l10n-attrs=\"aria-label, title\"\n      ?selectable=${selectable}\n      @select=${selectedHandler}\n    >\n    </moz-five-star>\n  </div>\n`;\n\nexport const FiveStar = Template.bind({});\nFiveStar.args = {\n  rating: 5.0,\n  l10nId: \"moz-five-star-aria-label\",\n};\n\nexport const WithTitle = Template.bind({});\nWithTitle.args = {\n  ...FiveStar.args,\n  rating: 0,\n  l10nId: \"moz-five-star-title\",\n};\n\nexport const Selectable = Template.bind({});\nSelectable.args = {\n  selectable: true,\n  selectedHandler: e => alert(`Selected rating: ${e.detail.rating}`),\n};\n\nexport const Default = Template.bind({});\nDefault.args = {\n  rating: 3.33,\n};\n","import __chrome_styles_loader__mozfivestarStyles from \"toolkit/content/widgets/moz-five-star/moz-five-star.css\";\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { ifDefined, html, classMap } from \"../vendor/lit.all.mjs\";\nimport { MozLitElement } from \"../lit-utils.mjs\";\n\nwindow.MozXULElement?.insertFTLIfNeeded(\"toolkit/global/mozFiveStar.ftl\");\n\n/**\n * @typedef {HTMLSpanElement} MozFiveStarRatingStarElement\n */\n\n/**\n * @typedef {{\n *   rating: number\n *   fill: 'full' | 'half' | 'empty'\n * }} MozFiveStarRenderedStarState\n */\n\n/**\n * The visual representation is five stars, each of them either empty,\n * half-filled or full. The fill state is derived from the rating,\n * rounded to the nearest half.\n *\n * @tagname moz-five-star\n * @property {number} rating - The rating out of 5.\n * @property {string} title - The title text.\n */\nexport default class MozFiveStar extends MozLitElement {\n  static properties = {\n    rating: { type: Number, reflect: true },\n    title: { type: String },\n    selectable: { type: Boolean },\n  };\n\n  constructor() {\n    super();\n\n    /**\n     * The initial rating that is also dynamically updated to the selected\n     * rating if {@link selectable} is set to true.\n     *\n     * @type {number}\n     */\n    this.rating = 0;\n\n    /**\n     * Whether the stars in the component are selectable.\n     *\n     * @type {boolean}\n     */\n    this.selectable = false;\n  }\n\n  static get queries() {\n    return {\n      starEls: { all: \".rating-star\" },\n      starsWrapperEl: \".stars\",\n    };\n  }\n\n  /**\n   * @returns {Array<MozFiveStarRenderedStarState>}\n   */\n  getStars() {\n    /**\n     * @type {Array<MozFiveStarRenderedStarState>}\n     */\n    let stars = [];\n\n    let roundedRating = Math.round(this.rating * 2) / 2;\n\n    for (let i = 1; i <= 5; i++) {\n      if (i <= roundedRating) {\n        stars.push({ rating: i, fill: \"full\" });\n      } else if (i - roundedRating === 0.5) {\n        stars.push({ rating: i, fill: \"half\" });\n      } else {\n        stars.push({ rating: i, fill: \"empty\" });\n      }\n    }\n    return stars;\n  }\n\n  /**\n   * @param {MozFiveStarRatingStarElement} ratingStarElement\n   * @returns\n   */\n  getStarElementRating(ratingStarElement) {\n    const stringRating = ratingStarElement.getAttribute(\"rating\") || \"\";\n    return parseInt(stringRating, 10);\n  }\n\n  /**\n   * @param {MouseEvent} e\n   */\n  onClick(e) {\n    if (!this.selectable) {\n      return;\n    }\n    /**\n     * @type {MozFiveStarRatingStarElement}\n     */\n    const ratingStarElement = /**@type {object} */ (e.target);\n\n    this.rating = this.getStarElementRating(ratingStarElement);\n\n    this.dispatchEvent(\n      new CustomEvent(\"select\", {\n        detail: {\n          rating: this.rating,\n        },\n      })\n    );\n  }\n\n  render() {\n    const { rating, selectable, title } = this;\n\n    const starsTitle = title || selectable;\n    return html`\n      <link\n        rel=\"stylesheet\"\n        href=\"${__chrome_styles_loader__mozfivestarStyles}\"\n      />\n      <div\n        class=\"stars\"\n        role=\"img\"\n        data-l10n-id=${ifDefined(\n          starsTitle ? undefined : \"moz-five-star-rating\"\n        )}\n        data-l10n-args=${ifDefined(\n          starsTitle ? undefined : JSON.stringify({ rating })\n        )}\n      >\n        ${this.getStars().map(({ rating: ratingValue, fill }) => {\n          return html`<span\n            class=${classMap({\n              \"rating-star\": true,\n              selectable,\n            })}\n            fill=${fill}\n            rating=${ratingValue}\n            @click=${this.onClick}\n            data-l10n-id=${ifDefined(\n              selectable ? \"moz-five-star-rating-rate-text\" : undefined\n            )}\n            data-l10n-args=${ifDefined(\n              selectable\n                ? JSON.stringify({\n                    rating: ratingValue,\n                  })\n                : undefined\n            )}\n          ></span>`;\n        })}\n      </div>\n    `;\n  }\n}\ncustomElements.define(\"moz-five-star\", MozFiveStar);\n"],"names":[],"sourceRoot":""}